<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>Category: 浏览器 | 欣のblog</title>
  <meta name="description" content="" />
  <meta name="keywords" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/">
  <link rel="alternate" href="/atom.xml" title="欣のblog" type="application/atom+xml">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="欣のblog">
<meta property="og:url" content="https://1578536879.github.io/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/index.html">
<meta property="og:site_name" content="欣のblog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
    
  <link href="https://fonts.googleapis.com/css?family=Inconsolata|Titillium+Web" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
  <link href='//cdn.bootcss.com/node-waves/0.7.5/waves.min.css' rel='stylesheet'>
  
<link rel="stylesheet" href="/style.css">

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>


  <script>setLoadingBarProgress(20)</script> 
  <header class="l_header">
	<div class='wrapper'>
		<div class="nav-main container container--flex">
			<a class="logo flat-box" href='/' >
				欣のblog
			</a>
			<div class='menu'>
				<ul class='h-list'>
					
						<li>
							<a class='flat-box nav-home' href='/'>
								Home
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-archives' href='/archives'>
								Archives
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-gallery' target="_blank" rel="noopener" href='https://photos.google.com/album/AF1QipNoqKYgspQo5O1YhlFXGCQ7p575KBH3Yxf8WHL4?hl=zh-CN'>
								Gallery
							</a>
						</li>
					
						<li>
							<a class='flat-box nav-about' href='/about'>
								About
							</a>
						</li>
					
				</ul>
				<div class='underline'></div>
			</div>
			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="Search" />
						<span class="icon icon-search"></span>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a href='javascript:void(0)'><span class="icon icon-search flat-box"></span></a></li>
				
				<li class='s-menu'><a href='javascript:void(0)'><span class="icon icon-menu flat-box"></span></a></li>
			</ul>
		</div>
		
		<div class='nav-sub container container--flex'>
			<a class="logo" class="flat-box" href='javascript:void(0)'>
				Word of Forks
			</a>

			<ul class='switcher h-list'>
				<li class='s-comment'><a href='javascript:void(0)'><span class="icon icon-chat_bubble_outline flat-box"></span></a></li>
				<li class='s-top'><a href='javascript:void(0)'><span class="icon icon-arrow_upward flat-box"></span></a></li>
				<li class='s-toc'><a href='javascript:void(0)'><span class="icon icon-format_list_numbered flat-box"></span></a></li>
			</ul>
		</div>
	</div>
</header>
<aside class="menu-phone">
	<nav>
		
			<a href="/" class="nav-home nav">
				Home
			</a>
		
			<a href="/archives" class="nav-archives nav">
				Archives
			</a>
		
			<a target="_blank" rel="noopener" href="https://photos.google.com/album/AF1QipNoqKYgspQo5O1YhlFXGCQ7p575KBH3Yxf8WHL4?hl=zh-CN" class="nav-gallery nav">
				Gallery
			</a>
		
			<a href="/about" class="nav-about nav">
				About
			</a>
		
	</nav>
</aside>

    <script>setLoadingBarProgress(40);</script>
  <div class="l_body">
    <div class='container clearfix'>
      <div class='l_main'>
        
  <script>
    window.subData= { title:'Category : 浏览器'}
  </script>

<section class="post-list">
	
    <div class='post-wrapper'>
      <article class="post reveal">
  <section class="meta">
    
    <h2 class="title">
      <a href="/2024/02/06/%E8%BE%93%E5%85%A5url%E5%88%B0%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA/">
        从地址栏到页面展示的流程
      </a>
    </h2>
    
    <time>
      Feb 6, 2024
    </time>
		
    
    <div class='cats'>
        <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
    </div>

  </section>
  <section class="article typo">
	  <h2 id="浏览器进程"><a href="#浏览器进程" class="headerlink" title="浏览器进程"></a>浏览器进程</h2><h1></h1>

<blockquote>
<p>1、<font color=red>UI 线程</font>会判断输入的内容是搜索关键词还是 URL</p>
</blockquote>
<ul>
<li>如果是搜索关键词，跳转至默认搜索引擎对应都搜索 URL，</li>
<li>如果输入的内容是 URL，则开始请求 URL。</li>
</ul>
<blockquote>
<p>2、UI 线程将关键词搜索对应的 URL 或输入的 URL 交给<font color=red>网络线程</font></p>
</blockquote>
<ul>
<li>UI 线程使 Tab 前的图标展示为加载中状态</li>
</ul>
<blockquote>
<p>3、网络线程发出请求，获取请求返回内容</p>
</blockquote>
<ul>
<li>先查询是否有url是ip还是域名，如果是域名，先去进行查看是否有对应的ip解析缓存，没有就进行DNS查询</li>
<li>建立三次握手（AKC，seq这些）</li>
<li>发送请求</li>
<li>服务器返回请求</li>
<li>如果收到服务器的 301 重定向响应，它就会告知 UI 线程进行重定向然后它会再次发起一个新的网络请求。</li>
<li>根据响应头中的 Content-Type 字段来确定响应主体的媒体类型</li>
<li>如果媒体类型是一个<font color=red>HTML</font>文件，则将响应数据交给<font color=red>渲染进程</font></li>
<li>如果是<font color=red>zip </font>文件或者<font color=red>其它</font>文件，会把相关数据传输给<font color=red>存储线程</font>，下载管理器。</li>
<li>浏览器会进行 <font color=red>Safe Browsing </font>安全检查，如果域名或者请求内容匹配到已知的恶意站点，网络线程会展示一个<font color=red>警告页</font>。除此之外，网络线程还会做<font color=red> CORB</font>（Cross Origin Read Blocking）检查来确定那些敏感的跨站数据不会被发送至渲染进程</li>
<li>四次挥手</li>
</ul>
<blockquote>
<p>4、<font color=red>网络线程</font>确信浏览器可以导航到请求网页，网络线程会通知<font color=red> UI 线程</font>数据已经准备好，UI 线程会查找到一个 <font color=red>渲染进程</font>进行网页的渲染。</p>
</blockquote>
<ul>
<li>浏览器为了对查找渲染进程这一步骤进行优化，考虑到网络请求获取响应需要时间，所以在第二步开始，浏览器已经预先查找和启动了一个渲染进程，如果中间步骤一切顺利，当 network thread 接收到数据时，渲染进程已经准备好了，但是如果遇到重定向，这个准备好的渲染进程也许就不可用了，这个时候会重新启动一个渲染进程。</li>
</ul>
<blockquote>
<p>5、浏览器进程 会向 渲染进程 发送 IPC 消息(进程通信的一种方式)来确认导航</p>
</blockquote>
<ul>
<li>浏览器进程将准备好的数据发送给渲染进程，渲染进程接收到数据之后，又发送 IPC 消息给浏览器进程，告诉浏览器进程导航已经提交了，页面开始加载。</li>
</ul>
<blockquote>
<p>6、当导航提交完成后，渲染进程开始加载资源及渲染页面，当页面渲染完成后（页面及内部的 iframe 都触发了 onload 事件），会向浏览器进程发送 IPC 消息，告知浏览器进程，这个时候 UI thread 会停止展示 tab 中的加载中图标。</p>
</blockquote>
<h2 id="渲染进程-关键渲染路径-CRP"><a href="#渲染进程-关键渲染路径-CRP" class="headerlink" title="渲染进程-关键渲染路径(CRP)"></a>渲染进程-关键渲染路径(CRP)</h2><h1></h1>

<blockquote>
<p>当渲染进程接受到导航的确认信息后，开始接受来自浏览器进程的数据，<font color=red>主线程</font>会解析数据转化为 DOM 对象。</p>
</blockquote>
<ul>
<li>解析到图片、CSS、JavaScript 脚本等<font color=red>资源</font>，这些资源是需要从网络或者缓存中获取的，主线程在构建 DOM 过程中如果遇到了这些资源，逐一发起<font color=red>请求</font>去获取，而为了提升效率，浏览器也会运行<font color=red>预加载扫描</font>（preload scanner）程序。“预加载扫描器”是<font color=red>并发</font>运行的，如果如果 HTML 中存在 img、link 等标签，预加载扫描程序会把这些请求传递给<font color=red>浏览器进程的网络线程</font>进行资源下载。</li>
<li>找到一个<font color=red><code>&lt; script &gt;</code>标签</font>时，它会<font color=red>暂停</font> HTML 文档的解析，并且必须加载、解析和执行 JavaScript 代码。因为<font color=red> JS 可以使用<code>document.write()</code>改变整个 DOM 结构之类的东西来改变文档的形状</font>（ HTML 规范中的解析模型概述有一个很好的图表）。这就是 HTML 解析器必须等待 JavaScript 运行才能继续解析 HTML 文档的原因。<a target="_blank" rel="noopener" href="https://mathiasbynens.be/notes/shapes-ics">V8 关于 JS 执行中的事情</a></li>
<li>因此如果 js 没有<code>document.write()</code>，可以添加 async 或 defer 属性到<code>&lt; script &gt;</code>标签。然后浏览器异步加载和运行 JavaScript 代码，这样不会阻止解析 DOM</li>
</ul>
<blockquote>
<p><font color=red>主线程</font>依据 Css 选择器以及浏览器默认样式来计算每个元素应该具备的具体样式</p>
</blockquote>
<blockquote>
<p><font color=red>主线程</font>会遍历 DOM 及相关元素的计算样式，构建出包含每个元素的页面坐标信息及盒子模型大小的布局树（Render Tree），遍历过程中，会<font color=red>跳过</font>隐藏的元素（display: none），另外，<font color=red>伪元素</font>虽然在 DOM 树上不可见，但是在<font color=red>布局树</font>上是可见的。</p>
</blockquote>
<blockquote>
<p>遍历布局树（layout tree），生成一系列的绘画记录（paint records）。绘画记录可以看做是记录各元素绘制先后顺序的笔记-绘画顺序表。</p>
</blockquote>
<blockquote>
<p><font color=red>主线程</font>需要遍历渲染树来创建一棵<font color=red>层次树</font>（Layer Tree），对于添加了<font color=red> will-change</font> CSS 属性的元素，会被看做<font color=red>单独</font>的一层，没有 will-change CSS 属性的元素，浏览器会根据情况决定是否要把该元素放在单独的层。</p>
</blockquote>
<ul>
<li>当页面的层超过一定的数量后，层的合成操作要比在每个帧中光栅化页面的一小部分还要慢，因此衡量你应用的渲染性能是十分重要的一件事情。</li>
</ul>
<blockquote>
<p>主线程会把这些信息通知给<font color=red>合成器</font>线程，合成器线程开始对层次数的每一层进行光栅化。 <br/>为了优化显示体验，合成线程可以给不同的光栅线程赋予不同的优先级，将那些在视口中的或者视口附近的层先被光栅化。</p>
</blockquote>
<ul>
<li><p>有的层的可以达到整个页面的大小，合成器需要将它们切分为一块又一块的小图块（tiles）</p>
</li>
<li><p>合成器将这些小图块分别进行发送给一系列<font color=red>光栅</font>线程（raster threads）进行光栅化</p>
</li>
<li><p>结束后光栅线程会将每个图块的光栅结果存在 GPU Process 的内存中</p>
</li>
</ul>
<blockquote>
<p>合成线程会收集图块上面叫做绘画四边形（draw quads）的信息来构建一个合成帧（compositor frame）。</p>
</blockquote>
<ul>
<li><p>绘画四边形：包含图块在内存的位置以及图层合成后图块在页面的位置之类的信息。</p>
</li>
<li><p>合成帧：代表页面一个帧的内容的绘制四边形集合。</p>
</li>
</ul>
<blockquote>
<p><font color=red>合成线程</font>就会通过 IPC 向<font color=red>浏览器进程</font>（browser process）提交（commit）一个<font color=red>渲染帧</font>。</p>
</blockquote>
<ul>
<li><p>这个时候可能有另外一个合成帧被浏览器进程的 UI 线程（UI thread）提交以改变浏览器的 UI。这些合成帧都会被发送给 GPU 从而展示在屏幕上。</p>
</li>
<li><p>如果合成线程收到页面滚动的事件，合成线程会构建另外一个组合帧发送给 GPU 来更新页面。</p>
</li>
</ul>
<h2 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h2><blockquote>
<p>当点击或者输入的时候，首先接受到事件的是<font color=red>浏览器进程</font></p>
</blockquote>
<blockquote>
<p>浏览器进程不处理，将事件丢给<font color=red>渲染进程</font></p>
</blockquote>
<blockquote>
<p>渲染进程依据事件发生的<font color=red>坐标</font>，找到<font color=red>目标对象</font>，运行附加的事件侦听器来适当地处理事件。</p>
</blockquote>
<blockquote>
<p><font color=red>合成器线程</font>会标记页面中绑定有事件处理器的区域为<font color=red>非快速滚动区域</font>(non-fast scrollable region)</p>
</blockquote>
<ul>
<li><p>当合成器线程向主线程发送输入事件时，首先要运行的是命中测试以找到事件目标。命中测试使用渲染过程中生成的绘制记录数据来找出发生事件的点坐标下方的内容。</p>
</li>
<li><p>如果事件发生在这些存在标注的区域，合成器线程会把事件信息发送给主线程，等待主线程进行事件处理</p>
</li>
<li><p>如果事件不是发生在这些区域，合成器线程则会直接合成新的帧而不用等到主线程的响应。</p>
</li>
<li><p>所以，在进行事件监听的时候，尤其是事件捕获或者对整个文档进行事件监听的时候需要考虑一下，因为整个页面都被标记为非快速滚动区域。这意味着即使不关心来自页面某些部分的输入，合成器线程也必须与主线程通信并在每次输入事件进入时等待它。因此，合成器的平滑滚动能力被打败了。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 浏览器在主线程中侦听事件，但合成器也可以继续合成新帧。</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">addEventListener</span>(enent, func, &#123; <span class="attr">passive</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>


<h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41499782/article/details/120039980">合成器线程详解&#x2705;</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35546787/article/details/107788179?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-0.topblog&spm=1001.2101.3001.4242.1&utm_relevant_index=3">一文搞懂浏览器的工作原理&#x270B;</a></p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41499782/article/details/120035602">chrome 渲染器进程的内部工作原理&#x270B;</a></p>


    
    
    
  </section>
</article>
    </div>
  
    <div class='post-wrapper'>
      <article class="post reveal">
  <section class="meta">
    
    <h2 class="title">
      <a href="/2024/02/06/Chrome--performance/">
        Chrome的Performance
      </a>
    </h2>
    
    <time>
      Feb 6, 2024
    </time>
		
    
    <div class='cats'>
        <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
    </div>

  </section>
  <section class="article typo">
	  <h1 id="Chrome-的-performance"><a href="#Chrome-的-performance" class="headerlink" title="Chrome 的 performance"></a>Chrome 的 performance</h1><h2 id="开始记录"><a href="#开始记录" class="headerlink" title="开始记录"></a>开始记录</h2><p>可以通过调整这两个参数模拟低网低 cpu 情况 <a target="_blank" rel="noopener" href="https://imgtu.com/i/bRXxL4"><img src="https://s1.ax1x.com/2022/03/09/bRXxL4.png" alt="bRXxL4.png"></a></p>
<p>点击按钮，刷新页面或者只需要旁边的刷新按钮开始进行记录分析 <a target="_blank" rel="noopener" href="https://imgtu.com/i/bRjuTA"><img src="https://s1.ax1x.com/2022/03/09/bRjuTA.png" alt="bRjuTA.png"></a></p>
<h2 id="操作设置栏-controls"><a href="#操作设置栏-controls" class="headerlink" title="操作设置栏 controls"></a>操作设置栏 controls</h2><ul>
<li>可以通过这个下拉框看到之前的分析数据</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bRjI1K"><img src="https://s1.ax1x.com/2022/03/09/bRjI1K.png" alt="bRjI1K.png"></a></p>
<ul>
<li>其他配置</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bRvDUA"><img src="https://s1.ax1x.com/2022/03/09/bRvDUA.png" alt="bRvDUA.png"></a></p>
<h2 id="页面性能的高级汇总-overview"><a href="#页面性能的高级汇总-overview" class="headerlink" title="页面性能的高级汇总 overview"></a>页面性能的高级汇总 overview</h2><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bRzmmF"><img src="https://s1.ax1x.com/2022/03/09/bRzmmF.png" alt="bRzmmF.png"></a> <a target="_blank" rel="noopener" href="https://imgtu.com/i/bWF68H"><img src="https://s1.ax1x.com/2022/03/09/bWF68H.png" alt="bWF68H.png"></a></p>
<ul>
<li>颜色表示<blockquote>
<p><font color=#87CEFA>HTML</font></p>
</blockquote>
</li>
</ul>
<blockquote>
<p><font color=yellow>脚本</font></p>
</blockquote>
<blockquote>
<p><font color=#9370DB>样式</font></p>
</blockquote>
<blockquote>
<p><font color=green>媒体资源</font></p>
</blockquote>
<blockquote>
<p><font color=gray>其他资源</font></p>
</blockquote>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>FPS，帧数</td>
<td><font color=green>绿色</font>竖线越高，FPS 越高。 FPS 图表上的<font color=red>红色</font>块表示长时间帧，很可能会出现卡顿</td>
</tr>
<tr>
<td>CPU，CPU 资源</td>
<td>指示消耗 CPU 资源的事件类型</td>
</tr>
<tr>
<td>NET，网络请求</td>
<td>每条彩色横杠表示一种资源。横杠越长，检索资源所需的时间越长。 每个横杠的浅色部分表示等待时间（从请求资源到第一个字节下载完成的时间），可以在屏幕快照下面查看具体的网络请求数据</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bWCE4J"><img src="https://s1.ax1x.com/2022/03/09/bWCE4J.png" alt="bWCE4J.png"></a></p>
<h2 id="火焰图：-CPU-堆叠可视化"><a href="#火焰图：-CPU-堆叠可视化" class="headerlink" title="火焰图： CPU 堆叠可视化"></a>火焰图： CPU 堆叠可视化</h2><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bWEmgH"><img src="https://s1.ax1x.com/2022/03/09/bWEmgH.png" alt="bWEmgH.png"></a></p>
<ul>
<li>Timing</li>
</ul>
<blockquote>
<p>FCP: First Contentful Paint，白屏时间，第一个元素出现的时间</p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/174837488">LCP</a>: Largest Contentful Paint，视窗最大可见图片或者文本块的渲染时间</p>
</blockquote>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qiwoo_weekly/article/details/98818202">FMP</a>: First Meaningful Paint，首次有效绘制时间，页面的“主要内容”开始出现在屏幕上的时间点</p>
</blockquote>
<blockquote>
<p>DCL: DOMContentLoaded Event，dom 加载完毕时间</p>
</blockquote>
<blockquote>
<p>L: Onload Event，完全加载完毕时间</p>
</blockquote>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>Network</td>
<td>资源加载顺序及时长</td>
</tr>
<tr>
<td>Main</td>
<td>渲染进程中主线程的执行记录，点击 main 可以看到某个任务执行的具体情况<a target="_blank" rel="noopener" href="https://imgtu.com/i/bWV5Os"><img src="https://s1.ax1x.com/2022/03/09/bWV5Os.png" alt="bWV5Os.png"></a></td>
</tr>
<tr>
<td>Timings</td>
<td>用户交互操作，比如点击鼠标、输入文字、动画等</td>
</tr>
<tr>
<td>Compositor</td>
<td>r 合成线程的执行记录，用来记录 html 绘制阶段 (Paint)结束后的图层合成操</td>
</tr>
<tr>
<td>Raster</td>
<td>光栅化线程池，用来让 GPU 执行光栅化的任务</td>
</tr>
<tr>
<td>GPU</td>
<td>GPU 进程主线程的执行过程记录，如 可以直观看到何时启动 GPU 加速</td>
</tr>
<tr>
<td>Frame</td>
<td>ifream 框架加载详情</td>
</tr>
<tr>
<td>Memory</td>
<td>不同的时间段的执行情况。页面中的内存使用的情况<a target="_blank" rel="noopener" href="https://imgtu.com/i/bWZwNV"><img src="https://s1.ax1x.com/2022/03/09/bWZwNV.png" alt="bWZwNV.png"></a></td>
</tr>
</tbody></table>
<ul>
<li><p>在火焰图上看到一到三条垂直的虚线。蓝线代表 DOMContentLoaded 事件。 绿线代表首次绘制的时间。 红线代表 load 事件</p>
</li>
<li><p>如果是耗时长的 Task，其右上角会标红，这个时候，我们可以选中标红的 Task，然后放大，看其具体的耗时点。放大后，这里可以看到都在做哪些操作，哪些函数耗时了多少,这里代码有压缩，看到的是压缩后的函数名。然后我们点击一下某个函数，在面板最下面，就会出现代码的信息，是哪个函数，耗时多少，在哪个文件上的第几行等。这样我们就很方便地定位到耗时函数了。<br><a target="_blank" rel="noopener" href="https://imgtu.com/i/bWu7JP"><img src="https://s1.ax1x.com/2022/03/09/bWu7JP.png" alt="bWu7JP.png"></a></p>
</li>
</ul>
<h2 id="Summary性能摘要"><a href="#Summary性能摘要" class="headerlink" title="Summary性能摘要"></a>Summary性能摘要</h2><p><a target="_blank" rel="noopener" href="https://imgtu.com/i/bWmDOJ"><img src="https://s1.ax1x.com/2022/03/09/bWmDOJ.png" alt="bWmDOJ.png"></a></p>
<ul>
<li>颜色表示<blockquote>
<p><font color=#87CEFA>Loading</font>：网络通信和HTML解析</p>
</blockquote>
</li>
</ul>
<blockquote>
<p><font color=yellow>Scripting</font>：JavaScript执行</p>
</blockquote>
<blockquote>
<p><font color=#9370DB>Rendering</font>：样式计算和布局，即重排</p>
</blockquote>
<blockquote>
<p><font color=green>Painting</font>：重绘</p>
</blockquote>
<blockquote>
<p><font color=gray>other</font>：其它事件花费的时间</p>
</blockquote>
<blockquote>
<p><font color=white>Idle</font>：空闲时间</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zjjing/p/9106111.html">事件包含</a></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/29879682">Chrome Performance 使用栗子</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/163474573">Chrome Performance 页面性能分析指南</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/b6f87bac5381">饼状图分析</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/xiaohuochai/p/9182710.html">performance</a></p>


    
    
    
  </section>
</article>
    </div>
  
    <div class='post-wrapper'>
      <article class="post reveal">
  <section class="meta">
    
    <h2 class="title">
      <a href="/2024/02/06/%E3%80%90%E5%89%8D%E7%AB%AF%E7%BC%93%E5%AD%98%E3%80%91%E9%9A%8F%E6%9C%BA%E6%95%B0%E4%BD%8D%E7%BD%AE%E5%8C%BA%E5%88%AB/">
        【前端缓存】随机数位置区别
      </a>
    </h2>
    
    <time>
      Feb 6, 2024
    </time>
		
    
    <div class='cats'>
        <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
    </div>

  </section>
  <section class="article typo">
	  <h2 id="文件随机数存放位置区别"><a href="#文件随机数存放位置区别" class="headerlink" title="文件随机数存放位置区别"></a>文件随机数存放位置区别</h2><h3 id="文件url-随机数"><a href="#文件url-随机数" class="headerlink" title="文件url+?+随机数"></a>文件url+?+随机数</h3><ul>
<li><p><code>https://xxx?v=1.x.x</code></p>
<p>一般用于版本号对应的文件</p>
</li>
<li><p><code>https://xxx?c=s45sdf</code></p>
<p>一般用于文件内容生成的hash值</p>
</li>
</ul>
<h3 id="文件名-hash值"><a href="#文件名-hash值" class="headerlink" title="文件名+hash值"></a>文件名+hash值</h3><p><code>https://xxxs45sdf</code></p>
<p>hash值一般由文件内容生成</p>
<h2 id="区别"><a href="#区别" class="headerlink" title="区别"></a>区别</h2><p>以上两种存放位置都可以使浏览器获取最新的文件，而不是走缓存拿文件</p>
<p>当前主流的一般是用文件名+hash值的形式。原因如下</p>
<blockquote>
<p>一般发版时，是有html文件和js、css文件的。<br />浏览器首先去请求html文件，html嵌入了js、css等其他文件。<br />那么在请求html和js、css等文件的这个时间差内，如果采用第一种方式(文件url+?+随机数)，就容易出现问题</p>
</blockquote>
<ul>
<li><p>如果先发html文件，再发js、css等文件</p>
<ul>
<li><p>客户请求时，浏览器不会走缓存，会去取最新的文件。</p>
</li>
<li><p>但是可能这个时候取的js、css文件还是老的文件。那么就导致客户端下次再去请求时，走的其实是缓存。</p>
</li>
</ul>
</li>
<li><p>先发js、css等文件，再发html文件</p>
<ul>
<li><p>对于有缓存的用户不会造成影响。</p>
</li>
<li><p>但是对于无缓存的用户，拿取数据时，会拿取到最新的js、css等文件，那么最直观的影响可能是页面样式问题。但当html发布成功后，页面会恢复正常</p>
</li>
</ul>
</li>
<li><p>对于异步加载的情况</p>
<ul>
<li><p>代码发布后，用户在使用过程中，进入了一个新路由</p>
</li>
<li><p>在新路由页面，获取的是最新的代码文件，但是在进入之前，获取的是老代码文件，那么这里就会导致新老代码文件交替，容易出现问题</p>
</li>
</ul>
</li>
</ul>
<p>因此，采用文件名+hash的方式，无论是先发html还是js、css文件，由于是直接通过文件名去获取的，那么就不会产生上述问题。</p>
<ul>
<li><p>先发js、css等文件</p>
<ul>
<li>由于文件名不同，由于文件名已经不一样了，所以不会覆盖掉之前存在的资源文件，客户端依旧可以安全的访问。</li>
</ul>
</li>
<li><p>再发html文件</p>
<ul>
<li>因为js、css等文件已经发布完毕了，那么当html更新了之后，再获取的js、css等文件就已经是最新的了</li>
</ul>
</li>
</ul>
<h2 id="参链"><a href="#参链" class="headerlink" title="参链"></a>参链</h2><p><a target="_blank" rel="noopener" href="https://github.com/fouber/blog/issues/6">大公司里怎样开发和部署前端代码</a></p>


    
    
    
  </section>
</article>
    </div>
  
    <div class='post-wrapper'>
      <article class="post reveal">
  <section class="meta">
    
    <h2 class="title">
      <a href="/2024/02/06/%E3%80%90devTools%E3%80%91%E5%B8%B8%E7%94%A8%E9%9D%A2%E6%9D%BF/">
        【devTools】常用面板
      </a>
    </h2>
    
    <time>
      Feb 6, 2024
    </time>
		
    
    <div class='cats'>
        <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
    </div>

  </section>
  <section class="article typo">
	  <h1 id="【devTools】常用面板"><a href="#【devTools】常用面板" class="headerlink" title="【devTools】常用面板"></a>【devTools】常用面板</h1><h2 id="Elements面板"><a href="#Elements面板" class="headerlink" title="Elements面板"></a>Elements面板</h2><h3 id="将元素存入变量"><a href="#将元素存入变量" class="headerlink" title="将元素存入变量"></a>将元素存入变量</h3><ul>
<li><p>右击</p>
</li>
<li><p>选择store as global variable</p>
</li>
<li><p>通过$0、$1…获取对应的元素</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVIrHH"><img src="https://s1.ax1x.com/2023/06/11/pCVIrHH.png" alt="pCVIrHH.png"></a></p>
<h2 id="console面板"><a href="#console面板" class="headerlink" title="console面板"></a>console面板</h2><h3 id="自动合并相似信息"><a href="#自动合并相似信息" class="headerlink" title="自动合并相似信息"></a>自动合并相似信息</h3><p>Group similar message in console，浏览器默认开启的</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVoeqe"><img src="https://s1.ax1x.com/2023/06/11/pCVoeqe.png" alt="pCVoeqe.png"></a></p>
<h3 id="Hide-network"><a href="#Hide-network" class="headerlink" title="Hide network"></a>Hide network</h3><p>隐藏网络的错误提示信息</p>
<h3 id="preserve-log"><a href="#preserve-log" class="headerlink" title="preserve log"></a>preserve log</h3><p>页面跳转时保留console信息</p>
<h3 id="show-timestamps"><a href="#show-timestamps" class="headerlink" title="show timestamps"></a>show timestamps</h3><p>打印时，会默认输入每一行信息的时间</p>
<p>打开：devtools右上角设置按钮，perferces下show timestamps</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVoGM8"><img src="https://s1.ax1x.com/2023/06/11/pCVoGM8.png" alt="pCVoGM8.png"></a></p>
<h3 id=""><a href="#" class="headerlink" title="$_"></a>$_</h3><p>作用：获取最近一次的执行结果</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVosMT"><img src="https://s1.ax1x.com/2023/06/11/pCVosMT.png" alt="pCVosMT.png"></a></p>
<h3 id="和"><a href="#和" class="headerlink" title="$和$$"></a>$和$$</h3><p><code>$</code>：document.querySelector</p>
<p><code>$$</code>: document.querySelectorAll</p>
<h3 id="x"><a href="#x" class="headerlink" title="$x"></a>$x</h3><p>可以使用xpath选择元素。</p>
<p>eg：$x(“&#x2F;html&#x2F;body&#x2F;div”)</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVofiR"><img src="https://s1.ax1x.com/2023/06/11/pCVofiR.png" alt="pCVofiR.png"></a></p>
<h3 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h3><p>执行到该函数时就会触发断点</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">debug</span>(fn)</span><br><span class="line"><span class="title function_">fn</span>()</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVo4Rx"><img src="https://s1.ax1x.com/2023/06/11/pCVo4Rx.png" alt="pCVo4Rx.png"></a></p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVooQK"><img src="https://s1.ax1x.com/2023/06/11/pCVooQK.png" alt="pCVooQK.png"></a></p>
<h3 id="monitor"><a href="#monitor" class="headerlink" title="monitor"></a>monitor</h3><p>函数执行时打印参数值，但无法打印箭头函数的参数</p>
<p>执行unmonitor删除效果</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn3</span>(<span class="params">a, b</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> a+b</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">monitor</span>(fn3)</span><br><span class="line"><span class="title function_">fn3</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"><span class="comment">//输出：VM3370:1 function fn3 called with arguments: 1, 2</span></span><br></pre></td></tr></table></figure>

<h3 id="monitroEvents"><a href="#monitroEvents" class="headerlink" title="monitroEvents"></a>monitroEvents</h3><p>监听并打印元素触发的事件，可以用数组一次性监听多个事件。</p>
<p>执行unmonitorEvents取消监听</p>
<h3 id="getEventListeners"><a href="#getEventListeners" class="headerlink" title="getEventListeners"></a>getEventListeners</h3><p>获取注册在元素上的所有事件监听器</p>
<h3 id="queryObjects"><a href="#queryObjects" class="headerlink" title="queryObjects"></a>queryObjects</h3><p>获取所有原型链中包含该原型的对象</p>
<h2 id="source面板"><a href="#source面板" class="headerlink" title="source面板"></a>source面板</h2><h3 id="FileSystem"><a href="#FileSystem" class="headerlink" title="FileSystem"></a>FileSystem</h3><p>可以直接与本地的文件连接，在devtools修改文件之后，会将本地的文件内容也进行修改</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVXADP"><img src="https://s1.ax1x.com/2023/06/11/pCVXADP.png" alt="pCVXADP.png"></a></p>
<h3 id="overrides"><a href="#overrides" class="headerlink" title="overrides"></a>overrides</h3><p>可以以本地的文件取代页面中载入的资源</p>
<h3 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h3><h4 id="条件断点"><a href="#条件断点" class="headerlink" title="条件断点"></a>条件断点</h4><p>在source代码块需要设置时，在对应的行号右键，选择Add Condition Break Point，写上具体的条件</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVXrb6"><img src="https://s1.ax1x.com/2023/06/11/pCVXrb6.png" alt="pCVXrb6.png"></a></p>
<h4 id="断点打印信息，Logpoint"><a href="#断点打印信息，Logpoint" class="headerlink" title="断点打印信息，Logpoint"></a>断点打印信息，Logpoint</h4><p>在执行时经过该程序代码时打印信息</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVXR8H"><img src="https://s1.ax1x.com/2023/06/11/pCVXR8H.png" alt="pCVXR8H.png"></a></p>
<h4 id="dom断点"><a href="#dom断点" class="headerlink" title="dom断点"></a>dom断点</h4><p>在element tab，右键元素，展开break on，有三种断点形式：</p>
<ul>
<li><p>subtree modifications ：元素内发生变化时暂停，如添加、删除、修改子节点</p>
</li>
<li><p>attribute modifications ：添加、删除、修改元素本身的属性时暂停</p>
</li>
<li><p>node removal：元素被删除时暂停，同时删除dom断点</p>
</li>
</ul>
<h4 id="请求断点"><a href="#请求断点" class="headerlink" title="请求断点"></a>请求断点</h4><p>在debugger时，点击在XHR&#x2F;fetch Breapoints列表右上角的+按钮，输入data，回车保存。</p>
<h4 id="事件监听器断点"><a href="#事件监听器断点" class="headerlink" title="事件监听器断点"></a>事件监听器断点</h4><p>在debugger时，在Event Listener BreakPoint列表的Control下勾选对应的事件，然后手动触发对应的事件</p>
<h4 id="忽略进入文件"><a href="#忽略进入文件" class="headerlink" title="忽略进入文件"></a>忽略进入文件</h4><p>在对应的文件代码内容区域，右键选择Add script to ignore list，添加之后，这个文件就不会在调试时进入了</p>
<h2 id="NetWork"><a href="#NetWork" class="headerlink" title="NetWork"></a>NetWork</h2><h3 id="设置区域"><a href="#设置区域" class="headerlink" title="设置区域"></a>设置区域</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVjISJ"><img src="https://s1.ax1x.com/2023/06/11/pCVjISJ.png" alt="pCVjISJ.png"></a></p>
<ul>
<li><p>Use large request rows</p>
<p>使用宽版的流量记录列表来显示</p>
</li>
<li><p>Group by frame</p>
<p>将来自相同iframe的请求聚焦在一起</p>
</li>
<li><p>show overview</p>
<p>是否显示时间轴</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVj7O1"><img src="https://s1.ax1x.com/2023/06/11/pCVj7O1.png" alt="pCVj7O1.png"></a></p>
<ul>
<li><p>Capture screenslots</p>
<p>是否截图</p>
</li>
</ul>


    
    
    
  </section>
</article>
    </div>
  
    <div class='post-wrapper'>
      <article class="post reveal">
  <section class="meta">
    
    <h2 class="title">
      <a href="/2024/02/06/%E3%80%90devTools%E3%80%91performance/">
        【devTools】performance
      </a>
    </h2>
    
    <time>
      Feb 6, 2024
    </time>
		
    
    <div class='cats'>
        <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
    </div>

  </section>
  <section class="article typo">
	  <h1 id="Performance面板"><a href="#Performance面板" class="headerlink" title="Performance面板"></a>Performance面板</h1><h2 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h2><h3 id="前提"><a href="#前提" class="headerlink" title="前提"></a>前提</h3><ul>
<li><p>保持环境整洁，例如使用隐私模式、清除缓存等</p>
</li>
<li><p>确定目标，在执行过程中，尽可能缩短持续时间，避免额外的操作等</p>
</li>
</ul>
<h3 id="开始记录"><a href="#开始记录" class="headerlink" title="开始记录"></a>开始记录</h3><ul>
<li><p>打开devTools，切换到Performance面板</p>
</li>
<li><p>点击左上角的圆形按钮开始记录</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVcIH0"><img src="https://s1.ax1x.com/2023/06/11/pCVcIH0.png" alt="pCVcIH0.png"></a></p>
<ul>
<li><p>记录过程种可以做一些交互</p>
</li>
<li><p>点击stop停止监测</p>
</li>
</ul>
<h3 id="生成内容"><a href="#生成内容" class="headerlink" title="生成内容"></a>生成内容</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVvNc9"><img src="https://s1.ax1x.com/2023/06/11/pCVvNc9.png" alt="pCVvNc9.png"></a></p>
<ul>
<li><p>工具栏：与整体面板有关的操作选项和设置</p>
</li>
<li><p>overview图表：可视化呈现完整时间轴的基本信息</p>
</li>
<li><p>Activities：将性能信息以方块式的Activity为单位显示在不同种类的列表中</p>
</li>
</ul>
<h2 id="工具栏"><a href="#工具栏" class="headerlink" title="工具栏"></a>工具栏</h2><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVvshD"><img src="https://s1.ax1x.com/2023/06/11/pCVvshD.png" alt="pCVvshD.png"></a></p>
<h3 id="Disabled-Javascript-Call-Stack"><a href="#Disabled-Javascript-Call-Stack" class="headerlink" title="Disabled Javascript Call Stack"></a>Disabled Javascript Call Stack</h3><p>Main列表不会显示js的Call stack信息</p>
<h3 id="Enable-advanced-paint-instrumentation"><a href="#Enable-advanced-paint-instrumentation" class="headerlink" title="Enable advanced paint instrumentation"></a>Enable advanced paint instrumentation</h3><p>记录绘制性能的详细信息，并显示在</p>
<ul>
<li><p>Frames：Frame activity的Layers分页</p>
</li>
<li><p>Main：Paint activity的Paint Profiler分页</p>
</li>
</ul>
<h2 id="Overview图表"><a href="#Overview图表" class="headerlink" title="Overview图表"></a>Overview图表</h2><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVv79g"><img src="https://s1.ax1x.com/2023/06/11/pCVv79g.png" alt="pCVv79g.png"></a></p>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>FPS，帧数</td>
<td><font color=green>绿色</font>竖线越高，FPS 越高。 FPS 图表上的<font color=red>红色</font>块表示长时间帧，很可能会出现卡顿</td>
</tr>
<tr>
<td>CPU，CPU 资源</td>
<td>指示消耗 CPU 资源的事件类型</td>
</tr>
<tr>
<td>NET，网络请求</td>
<td>每条彩色横杠表示一种资源。横杠越长，检索资源所需的时间越长。 每个横杠的浅色部分表示等待时间（从请求资源到第一个字节下载完成的时间），可以在屏幕快照下面查看具体的网络请求数据</td>
</tr>
</tbody></table>
<h3 id="FPS"><a href="#FPS" class="headerlink" title="FPS"></a>FPS</h3><p>绿色方块：每秒帧数的变化，红色、粉色横条为低帧数警告，即可能会让用户感受到卡顿的部分</p>
<h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><ul>
<li><p>灰色：浏览器内部的工作</p>
</li>
<li><p>蓝色：HTML请求、文件解析</p>
</li>
<li><p>黄色：事件、js</p>
</li>
<li><p>绿色：图像处理、画面绘制</p>
</li>
<li><p>紫色：样式计算</p>
</li>
</ul>
<h3 id="NET"><a href="#NET" class="headerlink" title="NET"></a>NET</h3><ul>
<li><p>蓝色：有请求正在执行</p>
</li>
<li><p>深色：优先权较高的请求</p>
</li>
</ul>
<h2 id="Activities"><a href="#Activities" class="headerlink" title="Activities"></a>Activities</h2><h3 id="Main"><a href="#Main" class="headerlink" title="Main"></a>Main</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVxZE6"><img src="https://s1.ax1x.com/2023/06/11/pCVxZE6.png" alt="pCVxZE6.png"></a></p>
<ul>
<li><p>作用</p>
<p>显示主线程所有的任务，持续事件超过50ms（长任务）的任务会以红色虚线和右上角的三角形标识</p>
</li>
</ul>
<p>任务底下的Activities依据类型有不同颜色，黄色的js Activity底下以随机颜色显示Call Stack Activities</p>
<h3 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVx5rR"><img src="https://s1.ax1x.com/2023/06/11/pCVx5rR.png" alt="pCVx5rR.png"></a></p>
<ul>
<li><p>左侧的细线：连接至发送请求前</p>
</li>
<li><p>浅色区域：等待服务器响应</p>
</li>
<li><p>深色区域：下载资源</p>
</li>
<li><p>右侧的细线：解析资源</p>
</li>
<li><p>左上角的小方块：请求优先级，深色表示高，浅色表示浅</p>
</li>
</ul>
<h3 id="Frames"><a href="#Frames" class="headerlink" title="Frames"></a>Frames</h3><p>显示每一帧画面的详细信息</p>
<h3 id="Timeings"><a href="#Timeings" class="headerlink" title="Timeings"></a>Timeings</h3><p>显示网页使用的重要时间点</p>
<ul>
<li><p>DCL：HTML已经加载且解析完毕</p>
</li>
<li><p>FP：绘制出默认背景颜色之外的任何内容</p>
</li>
<li><p>FCP：绘制出任何文字、图片、有颜色的canvas时</p>
</li>
<li><p>LCP：绘制出页面最大的内容时</p>
</li>
<li><p>L：解析HTML期间请求的资源都载入完成时</p>
</li>
</ul>
<h3 id="Experience"><a href="#Experience" class="headerlink" title="Experience"></a>Experience</h3><p>显示所有元素位移并计算分数，越低表示页面稳定性越高</p>
<h3 id="GPU"><a href="#GPU" class="headerlink" title="GPU"></a>GPU</h3><p>显示GPU的使用事件</p>
<h3 id="Raster"><a href="#Raster" class="headerlink" title="Raster"></a>Raster</h3><p>定义：浏览器渲染流程中Paint阶段的一环</p>
<p>作用：显示产生Raster时各个线程的信息</p>
<h2 id="信息面板："><a href="#信息面板：" class="headerlink" title="信息面板："></a>信息面板：</h2><ul>
<li><p>summary：显示activity的持续时间，并将期间发生的其他activities分类显示</p>
</li>
<li><p>botton-up：将同一种activity的运行时间加总</p>
</li>
<li><p>call tree：以触发关系自上而下显示activities，最上方的称为root activity，是下面各个activities的起点</p>
</li>
<li><p>event log：以时间顺序显示activities</p>
</li>
</ul>
<blockquote>
<p>注：activity占用主线程超过50ms会被加上红色三角形，成为long task</p>
</blockquote>
<h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>显示该Activity的持续事件，并将期间发生的其他Activists分类显示</p>
<h3 id="call-tree"><a href="#call-tree" class="headerlink" title="call tree"></a>call tree</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCV2ztK"><img src="https://s1.ax1x.com/2023/06/11/pCV2ztK.png" alt="pCV2ztK.png"></a></p>
<p>call tree会显示任务由哪些activities组成，若activity的类型为程序代码，则层层展开可以看到函数的call stack</p>
<ul>
<li><p>self time</p>
<p>函数本身的运行时间，并不包含函数执行其他函数的时间</p>
</li>
<li><p>total time</p>
<p>函数本身和其下所有函数的运行时间的总和</p>
</li>
</ul>
<h3 id="bottom-up"><a href="#bottom-up" class="headerlink" title="bottom-up"></a>bottom-up</h3><p>会将同一种activity的运行时间加总，因此分页中self time较长的函数通常是性能瓶颈的来源</p>
<p>注：总运行时间长也可能是因为执行次数多</p>
<h3 id="Event-Log"><a href="#Event-Log" class="headerlink" title="Event Log"></a>Event Log</h3><p>以触发事件顺序显示Activities</p>
<h2 id="performance-monitor"><a href="#performance-monitor" class="headerlink" title="performance monitor"></a>performance monitor</h2><h3 id="打开"><a href="#打开" class="headerlink" title="打开"></a>打开</h3><p>1、在devtool按esc打开drawer，在左上角三个点打开</p>
<p>2、在devtools右上角的三个点，打开more tools打开</p>
<h3 id="作用"><a href="#作用" class="headerlink" title="作用"></a>作用</h3><p>实时监测性能信息，用于检查特定功能是否存在内存泄漏的问题，实时反应内存用量的趋势。一般会把重点放在js heap size（js内存使用占有量）和dom tools</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVf0T1"><img src="https://s1.ax1x.com/2023/06/11/pCVf0T1.png" alt="pCVf0T1.png"></a></p>
<h2 id="Web-Vitals"><a href="#Web-Vitals" class="headerlink" title="Web Vitals"></a>Web Vitals</h2><h3 id="LCP：前端性能指标，用于表示加载速度"><a href="#LCP：前端性能指标，用于表示加载速度" class="headerlink" title="LCP：前端性能指标，用于表示加载速度"></a>LCP：前端性能指标，用于表示加载速度</h3><p>可以在performance的timeing中可以看到</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCV4QP0"><img src="https://s1.ax1x.com/2023/06/11/pCV4QP0.png" alt="pCV4QP0.png"></a></p>
<h3 id="FID：表示首次输入延迟"><a href="#FID：表示首次输入延迟" class="headerlink" title="FID：表示首次输入延迟"></a>FID：表示首次输入延迟</h3><p>通过rendering分页的Core Web Vitals来判断</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCV45z8"><img src="https://s1.ax1x.com/2023/06/11/pCV45z8.png" alt="pCV45z8.png"></a></p>
<h3 id="CLS：表示累计布局偏移"><a href="#CLS：表示累计布局偏移" class="headerlink" title="CLS：表示累计布局偏移"></a>CLS：表示累计布局偏移</h3><p>通过performance的Experience的layout shift标签</p>


    
    
    
  </section>
</article>
    </div>
  
    <div class='post-wrapper'>
      <article class="post reveal">
  <section class="meta">
    
    <h2 class="title">
      <a href="/2024/02/06/%E3%80%90devTools%E3%80%91layers/">
        【devTools】layers
      </a>
    </h2>
    
    <time>
      Feb 6, 2024
    </time>
		
    
    <div class='cats'>
        <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
    </div>

  </section>
  <section class="article typo">
	  <h1 id="【devTools】layers"><a href="#【devTools】layers" class="headerlink" title="【devTools】layers"></a>【devTools】layers</h1><h2 id="元素绘制"><a href="#元素绘制" class="headerlink" title="元素绘制"></a>元素绘制</h2><p>可以查看哪些元素正在绘制</p>
<h3 id="打开"><a href="#打开" class="headerlink" title="打开"></a>打开</h3><ul>
<li><p>在devtools页面按esc，点击左上角的三个点，打开rendering分页</p>
</li>
<li><p>勾选对应的选项</p>
</li>
</ul>
<h3 id="页面表现"><a href="#页面表现" class="headerlink" title="页面表现"></a>页面表现</h3><ul>
<li>勾选了paint flashing</li>
</ul>
<p>元素正在绘制时，会由绿色小框表示</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVha38"><img src="https://s1.ax1x.com/2023/06/11/pCVha38.png" alt="pCVha38.png"></a></p>
<ul>
<li>勾选layer borders</li>
</ul>
<p>可以显示每个图层的区域范围</p>
<p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCVh4u4"><img src="https://s1.ax1x.com/2023/06/11/pCVh4u4.png" alt="pCVh4u4.png"></a></p>
<h2 id="layers"><a href="#layers" class="headerlink" title="layers"></a>layers</h2><h3 id="打开-1"><a href="#打开-1" class="headerlink" title="打开"></a>打开</h3><p>在devtools右上角三个点，点击more tools，点击layers打开layers标签</p>
<h3 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h3><p><a target="_blank" rel="noopener" href="https://imgse.com/i/pCV4AxS"><img src="https://s1.ax1x.com/2023/06/11/pCV4AxS.png" alt="pCV4AxS.png"></a></p>
<p>可以显示当前页面存在哪些图层，对于具体的图层，可以看到其对应的大小、产生原因及内存占有量</p>


    
    
    
  </section>
</article>
    </div>
  
    <div class='post-wrapper'>
      <article class="post reveal">
  <section class="meta">
    
    <h2 class="title">
      <a href="/2024/02/06/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AE%89%E5%85%A8/">
        浏览器安全
      </a>
    </h2>
    
    <time>
      Feb 6, 2024
    </time>
		
    
    <div class='cats'>
        <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">浏览器</a>
    </div>

  </section>
  <section class="article typo">
	  <h2 id="url"><a href="#url" class="headerlink" title="url"></a>url</h2><h3 id="规范形式"><a href="#规范形式" class="headerlink" title="规范形式"></a>规范形式</h3><blockquote>
<p>scheme：&#x2F;&#x2F;[user:password@]domain:port&#x2F;path?query_string#fragments</p>
</blockquote>
<ul>
<li>scheme</li>
</ul>
<p>方案名，也常被当为协议名混用。一般为http、https、ftp等，告诉浏览器应该如何进行连接。浏览器在识别时不区分大小写</p>
<ul>
<li>[user:password]。可选</li>
</ul>
<p>验证信息，提供登陆主机的身份信息，不建议使用这种方式进行身份验证，因为传递时是明文，且并非所有浏览器都支持</p>
<ul>
<li>domain</li>
</ul>
<p>主机名，使用域名，主机名或者合法ip均可。如果要使用ipv6地址，则地址必须要在中括号([])中括起来，如http:&#x2F;&#x2F;[::1]。不区分域名大小写</p>
<ul>
<li>port</li>
</ul>
<p>端口号，表明浏览器应该连接目标的哪个端口，如果没有指定，使用默认端口（http为80，https为443）</p>
<ul>
<li>path</li>
</ul>
<p>路径，表明浏览器获取什么数据。如果服务器的文件系统是大小写敏感，那么路径也可能是大小写敏感</p>
<ul>
<li>query_string</li>
</ul>
<p>查询字符串，由一个或多个“key&#x3D;value”对组成，表示需要传递给服务器的内容</p>
<ul>
<li>fragments</li>
</ul>
<p>片段字符，hash部分，表明文档资源的某个部分位置。例如可以让浏览器定位到锚点（通称超级链接锚点标签<a>，anchor）的id处。一般情况下，hash值改变不会使得浏览器发出请求</p>
<h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><ul>
<li>字形欺骗</li>
</ul>
<p>利用字形相似来进行url的替换，例如英文l和数字1，不同国家之间的符号欺骗等</p>
<ul>
<li>浏览器的自纠错</li>
</ul>
<p>分解映射：浏览器会对一些字符有自动分解，会将一些特定字符分解为浏览器可识别的内容。</p>
<p>例如将罗马数字，cjk兼容字符，带圈数字&#x2F;英文等替换为ascii字符</p>
<h2 id="http"><a href="#http" class="headerlink" title="http"></a>http</h2><h3 id="crlf攻击"><a href="#crlf攻击" class="headerlink" title="crlf攻击"></a>crlf攻击</h3><p>通过注入http头来篡改响应消息，，也可以构建超长的http头攻击运行着apache2.2.0～2.2.21服务器，使用户的http only的cookie泄漏</p>
<h3 id="401"><a href="#401" class="headerlink" title="401"></a>401</h3><p>利用浏览器的特性—当用户正在访问需要认证的资源时，服务器会响应401，浏览器收到这个状态码后，会根据服务器提供的认证提示信息弹出认证窗口。</p>
<h3 id="xss"><a href="#xss" class="headerlink" title="xss"></a>xss</h3><p>-存储型：用户输入内容没有做校验</p>
<h2 id="页面"><a href="#页面" class="headerlink" title="页面"></a>页面</h2><h3 id="点击劫持"><a href="#点击劫持" class="headerlink" title="点击劫持"></a>点击劫持</h3><p>将页面用iframe或者其他形式放在页面底层，用户查看的页面和实际点击的数据不一致。</p>
<p>-预防：<code>x-frame-option</code>设置页面是否支持iframe显示</p>
<h3 id="中间人攻击"><a href="#中间人攻击" class="headerlink" title="中间人攻击"></a>中间人攻击</h3><p>###阻止hsts，即阻止http升级https</p>


    
    
    
  </section>
</article>
    </div>
  
</section>


      </div>
      <aside class='l_side'>
        
  <section class='m_widget about'>

<img class='avatar waves-image' src='/images/avatar.jpg' />

<div class='header'>John Doe</div>
<div class='content'>
<div class='desc'>Tempora mutantur, nos et mutamur in illis ...</div>
</div>
</section>

  <section class='m_widget links'>
<div class='header'>Links</div>
<div class='content'>
    <ul class="entry">
    
        <li><a class="flat-box" target="_blank" href="https://ccoooss.com">
            <div class='name'>ClassicOldSong</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://frantic1048.logdown.com/">
            <div class='name'>Frantic1048</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://hclmaster.github.io/">
            <div class='name'>Hclmaster</div>
        </a></li>
    
        <li><a class="flat-box" target="_blank" href="https://whst.github.io/">
            <div class='name'>WANG Hsü-Tung</div>
        </a></li>
    
    </ul>
</div>
</section>

  <section class='m_widget categories'>
<div class='header'>Categories</div>
<div class='content'>
    
    <ul class="entry">
    
        <li><a class="flat-box" href="/categories/Defi/"><div class='name'>Defi</div><div class='badget'>8</div></a></li>
    
        <li><a class="flat-box" href="/categories/HTML/"><div class='name'>HTML</div><div class='badget'>2</div></a></li>
    
        <li><a class="flat-box" href="/categories/PWA/"><div class='name'>PWA</div><div class='badget'>1</div></a></li>
    
        <li><a class="flat-box" href="/categories/css/"><div class='name'>css</div><div class='badget'>11</div></a></li>
    
        <li><a class="flat-box" href="/categories/http/"><div class='name'>http</div><div class='badget'>1</div></a></li>
    
        <li><a class="flat-box" href="/categories/js/"><div class='name'>js</div><div class='badget'>5</div></a></li>
    
        <li><a class="flat-box" href="/categories/vue/"><div class='name'>vue</div><div class='badget'>4</div></a></li>
    
        <li><a class="flat-box" href="/categories/web3/"><div class='name'>web3</div><div class='badget'>1</div></a></li>
    
        <li><a class="flat-box" href="/categories/webAssembly/"><div class='name'>webAssembly</div><div class='badget'>2</div></a></li>
    
        <li><a class="flat-box" href="/categories/webpack/"><div class='name'>webpack</div><div class='badget'>2</div></a></li>
    
        <li><a class="flat-box" href="/categories/webwork/"><div class='name'>webwork</div><div class='badget'>1</div></a></li>
    
        <li><a class="flat-box" href="/categories/%E4%B8%9A%E5%8A%A1%E5%9C%BA%E6%99%AF/"><div class='name'>业务场景</div><div class='badget'>1</div></a></li>
    
        <li><a class="flat-box" href="/categories/%E5%B0%8F%E7%A8%8B%E5%BA%8F/"><div class='name'>小程序</div><div class='badget'>2</div></a></li>
    
        <li><a class="flat-box" href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/"><div class='name'>浏览器</div><div class='badget'>7</div></a></li>
    
        <li><a class="flat-box" href="/categories/%E9%A2%9D%E5%A4%96%E5%86%85%E5%AE%B9/"><div class='name'>额外内容</div><div class='badget'>5</div></a></li>
    
    </ul>
    
</div>
</section>

  
<div class="m_widget tagcloud">
    <div class="header">Tags</div>
    <div class='content'>
        <a href="/tags/chrome/" style="font-size: 14px; color: #808080">chrome</a> <a href="/tags/console/" style="font-size: 14px; color: #808080">console</a> <a href="/tags/js/" style="font-size: 14px; color: #808080">js</a>
    </div>
</div>



      </aside>
      <script>setLoadingBarProgress(60);</script>
    </div>
  </div>
  <footer id="footer" class="clearfix">

	<div class="social-wrapper">
  	
      
        <a href="https://github.com/stkevintan" class="social github"
          target="_blank" rel="external">
          <span class="icon icon-github"></span>
        </a>
      
        <a href="https://twitter.com/kevinsfork" class="social twitter"
          target="_blank" rel="external">
          <span class="icon icon-twitter"></span>
        </a>
      
        <a href="/atom.xml" class="social rss"
          target="_blank" rel="external">
          <span class="icon icon-rss"></span>
        </a>
      
    
  </div>
  
  <div>Theme <a target="_blank" rel="noopener" href='https://github.com/stkevintan/hexo-theme-material-flow' class="codename">MaterialFlow</a> designed by <a href="http://keyin.me/" target="_blank">Kevin Tan</a>.</div>
  
</footer>


  <script>setLoadingBarProgress(80);</script>
  

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src='//cdn.bootcss.com/node-waves/0.7.5/waves.min.js'></script>
<script src="//cdn.bootcss.com/scrollReveal.js/3.3.2/scrollreveal.min.js"></script>

<script src="/js/jquery.fitvids.js"></script>

<script>
	var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
	var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
	var ALGOLIA_API_KEY = "";
	var ALGOLIA_APP_ID = "";
	var ALGOLIA_INDEX_NAME = "";
  var AZURE_SERVICE_NAME = "";
  var AZURE_INDEX_NAME = "";
  var AZURE_QUERY_KEY = "";
  var BAIDU_API_ID = "";
  var SEARCH_SERVICE = "hexo";
  var ROOT = "/"||"/";
  if(!ROOT.endsWith('/'))ROOT += '/';
</script>

<script src="/js/search.js"></script>


<script src="/js/app.js"></script>



  <script>setLoadingBarProgress(100);</script>
</body>
</html>
